# Layer 2: Data Link Layer (ржбрж╛ржЯрж╛ рж▓рж┐ржВржХ рж╕рзНрждрж░)

Data Link Layer рж╣рж▓рзЛ OSI ржоржбрзЗрж▓рзЗрж░ ржжрзНржмрж┐рждрзАржпрж╝ рж╕рзНрждрж░ред ржПржЯрж┐ Physical Layer ржПрж░ ржарж┐ржХ ржЙржкрж░рзЗ ржЕржмрж╕рзНржерж┐ржд ржПржмржВ Network Layer ржПрж░ ржирж┐ржЪрзЗред

## ржорзВрж▓ ржХрж╛ржЬ (Primary Functions):

**рзз. Framing (ржлрзНрж░рзЗржорж┐ржВ):**
- Network Layer ржерзЗржХрзЗ ржЖрж╕рж╛ ржбрж╛ржЯрж╛ ржкрзНржпрж╛ржХрзЗржЯржЧрзБрж▓рзЛржХрзЗ ржЫрзЛржЯ ржЫрзЛржЯ ржлрзНрж░рзЗржорзЗ ржнрж╛ржЧ ржХрж░рзЗ
- ржкрзНрж░рждрж┐ржЯрж┐ ржлрзНрж░рзЗржорзЗ header ржПржмржВ trailer ржпрзБржХрзНржд ржХрж░рзЗ
- ржЙржжрж╛рж╣рж░ржг: ржПржХржЯрж┐ ржмржбрж╝ ржлрж╛ржЗрж▓ржХрзЗ ржЫрзЛржЯ ржЫрзЛржЯ ржЕржВрж╢рзЗ ржнрж╛ржЧ ржХрж░рж╛рж░ ржорждрзЛ

**рзи. Physical Addressing (ржлрж┐ржЬрж┐ржХрзНржпрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕рж┐ржВ):**
- MAC (Media Access Control) Address ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ
- ржкрзНрж░рждрж┐ржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржПржХржЯрж┐ unique MAC address ржерж╛ржХрзЗ
- ржПржЯрж┐ 48-bit address (ржпрзЗржоржи: 00:1A:2B:3C:4D:5E)

**рзй. Error Detection & Correction:**
- ржбрж╛ржЯрж╛ ржЯрзНрж░рж╛ржирзНрж╕ржорж┐рж╢ржирзЗ ржХрзЛржирзЛ error рж╣ржпрж╝рзЗржЫрзЗ ржХрж┐ржирж╛ рждрж╛ detect ржХрж░рзЗ
- CRC (Cyclic Redundancy Check) method ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ
- ржкрзНрж░ржпрж╝рзЛржЬржирзЗ error рж╕ржВрж╢рзЛржзржи ржХрж░рзЗ

**рзк. Flow Control:**
- sender ржПржмржВ receiver ржПрж░ ржоржзрзНржпрзЗ ржбрж╛ржЯрж╛ ржкрзНрж░ржмрж╛рж╣ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗ
- receiver ржпрж╛рждрзЗ overwhelmed ржирж╛ рж╣ржпрж╝ рждрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ

**рзл. Access Control:**
- ржПржХржЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржПржХрж╛ржзрж┐ржХ ржбрж┐ржнрж╛ржЗрж╕ ржерж╛ржХрж▓рзЗ ржХрзЗ ржХржЦржи ржбрж╛ржЯрж╛ ржкрж╛ржарж╛ржмрзЗ рждрж╛ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗ

## ржжрзБржЯрж┐ Sub-layer:

**LLC (Logical Link Control):**
- ржЙржкрж░рзЗрж░ layer (Network Layer) ржПрж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░рзЗ
- Error control ржПржмржВ flow control handle ржХрж░рзЗ

**MAC (Media Access Control):**
- Physical Layer ржПрж░ рж╕рж╛ржерзЗ рж╕рж░рж╛рж╕рж░рж┐ ржХрж╛ржЬ ржХрж░рзЗ
- Physical addressing ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рзЗ

## ржмрж╛рж╕рзНрждржм ржЙржжрж╛рж╣рж░ржг:

ржпржЦржи ржЖржкржирж┐ ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░ ржерзЗржХрзЗ ржПржХржЗ Wi-Fi ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржерж╛ржХрж╛ ржЕржирзНржп ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗ ржлрж╛ржЗрж▓ ржкрж╛ржарж╛ржи, рждржЦржи Data Link Layer:
- ржЖржкржирж╛рж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ MAC address ржерзЗржХрзЗ ржЕржкрж░ ржХржорзНржкрж┐ржЙржЯрж╛рж░рзЗрж░ MAC address ржП ржбрж╛ржЯрж╛ ржкрж╛ржарж╛ржпрж╝
- ржбрж╛ржЯрж╛ржХрзЗ ржЫрзЛржЯ ржлрзНрж░рзЗржорзЗ ржнрж╛ржЧ ржХрж░рзЗ
- ржкрзНрж░рждрж┐ржЯрж┐ ржлрзНрж░рзЗржо рж╕ржарж┐ржХржнрж╛ржмрзЗ ржкрзМржБржЫрзЗржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рзЗ

## рж╕рж╛ржзрж╛рж░ржг ржбрж┐ржнрж╛ржЗрж╕:
- Switch
- Bridge
- NIC (Network Interface Card)

ржПржЗ layer ржЯрж┐ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ, ржжрзБржЯрж┐ рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзБржХрзНржд ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржоржзрзНржпрзЗ ржбрж╛ржЯрж╛ ржирж┐рж░рзНржнрж░ржпрзЛржЧрзНржпржнрж╛ржмрзЗ ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи рж╣ржпрж╝ред



# Layer 2: Data Link Layer - ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрзНржпрж╛ржЦрзНржпрж╛

## MAC Address - ржЧржнрзАрж░ ржкрж░рзНржпрж╛рж▓рзЛржЪржирж╛

### MAC Address ржПрж░ ржЧржаржи:

```
48-bit = 6 bytes = 12 Hexadecimal digits

Example: A1:B2:C3:D4:E5:F6

тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ   OUI (24-bit)  тФВ   NIC (24-bit)  тФВ
тФВ OrganizationallyтФВ Network InterfaceтФВ
тФВ Unique ID       тФВ Controller      тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
   A1:B2:C3          D4:E5:F6
   (ржирж┐рж░рзНржорж╛рждрж╛)        (ржбрж┐ржнрж╛ржЗрж╕ ржиржорзНржмрж░)
```

**OUI (Organizational Unique Identifier):**
- ржкрзНрж░ржержо 24 bit - ржирж┐рж░рзНржорж╛рждрж╛ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржи ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗ
- ржЙржжрж╛рж╣рж░ржг: 
  - Dell: 00:14:22
  - Cisco: 00:1A:A1
  - Apple: AC:DE:48

**NIC (Network Interface Controller):**
- рж╢рзЗрж╖ 24 bit - ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржбрж┐ржнрж╛ржЗрж╕ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗ
- ржирж┐рж░рзНржорж╛рждрж╛ ржкрзНрж░рждрж┐рж╖рзНржарж╛ржи ржирж┐ржЬрзЗржЗ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗ

### MAC Address ржПрж░ ржкрзНрж░ржХрж╛рж░ржнрзЗржж:

**1. Unicast MAC:**
- ржПржХржХ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп
- ржЙржжрж╛рж╣рж░ржг: A1:B2:C3:D4:E5:F6
- ржкрзНрж░ржержо byte ржПрж░ LSB = 0

**2. Multicast MAC:**
- ржПржХрж╛ржзрж┐ржХ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп
- ржЙржжрж╛рж╣рж░ржг: 01:00:5E:00:00:01
- ржкрзНрж░ржержо byte ржПрж░ LSB = 1

**3. Broadcast MAC:**
- рж╕ржХрж▓ ржбрж┐ржнрж╛ржЗрж╕рзЗрж░ ржЬржирзНржп
- рж╕ржмрж╕ржоржпрж╝: FF:FF:FF:FF:FF:FF

---

## Ethernet Frame Structure - рж╕ржорзНржкрзВрж░рзНржг ржмрж┐рж╢рзНрж▓рзЗрж╖ржг

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФР
тФВPreamble  тФВ   SFD    тФВDest. MAC  тФВSourceтФВ   Type/  тФВData тФВ FCS тФВ
тФВ 7 bytes  тФВ  1 byte  тФВ  6 bytes  тФВ MAC  тФВ  Length  тФВ     тФВ4 byteтФВ
тФВ          тФВ          тФВ           тФВ6 byteтФВ  2 bytes тФВ     тФВ     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФШ
   56 bits    8 bits     48 bits   48 bit   16 bits  46-1500  32 bit
```

### ржкрзНрж░рждрж┐ржЯрж┐ ржЕржВрж╢рзЗрж░ ржХрж╛ржЬ:

**1. Preamble (ржкрзНрж░рж╕рзНрждрж╛ржмржирж╛) - 7 bytes:**
```
Pattern: 10101010 10101010 10101010 10101010 10101010 10101010 10101010
ржХрж╛ржЬ: 
- Receiver ржХрзЗ рж╕рждрж░рзНржХ ржХрж░рзЗ ржпрзЗ frame ржЖрж╕ржЫрзЗ
- Clock synchronization ржХрж░рзЗ
- Receiver ржПрж░ timing adjust ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗ
```

**2. SFD (Start Frame Delimiter) - 1 byte:**
```
Pattern: 10101011
ржХрж╛ржЬ:
- Frame ржПрж░ ржкрзНрж░ржХрзГржд рж╢рзБрж░рзБ ржмрзБржЭрж╛ржпрж╝
- рж╢рзЗрж╖ ржжрзБржЗ bit (11) ржжрж┐ржпрж╝рзЗ ржмрзБржЭрж╛ржпрж╝ ржПржЦржи ржбрж╛ржЯрж╛ рж╢рзБрж░рзБ
```

**3. Destination MAC Address - 6 bytes:**
```
Example: 00:11:22:33:44:55
ржХрж╛ржЬ:
- ржХрзЛржерж╛ржпрж╝ ржкрж╛ржарж╛рждрзЗ рж╣ржмрзЗ рждрж╛ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ
- Switch ржПржЯрж┐ ржкржбрж╝рзЗ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржирзЗржпрж╝
```

**4. Source MAC Address - 6 bytes:**
```
Example: A1:B2:C3:D4:E5:F6
ржХрж╛ржЬ:
- ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ рждрж╛ ржЬрж╛ржирж╛ржпрж╝
- Reply ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп ржжрж░ржХрж╛рж░
- Switch ржПржЯрж┐ ржжрзЗржЦрзЗ MAC Table update ржХрж░рзЗ
```

**5. Type/Length Field - 2 bytes:**
```
ржпржжрж┐ ржорж╛ржи тЙе 1536 (0x0600):
  - Type ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ
  - 0x0800 = IPv4
  - 0x0806 = ARP
  - 0x86DD = IPv6

ржпржжрж┐ ржорж╛ржи тЙд 1500:
  - Data ржПрж░ length ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ
```

**6. Data/Payload - 46 to 1500 bytes:**
```
- ржкрзНрж░ржХрзГржд рждржерзНржп ржерж╛ржХрзЗ
- Minimum: 46 bytes (ржЫрзЛржЯ рж╣рж▓рзЗ padding ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝)
- Maximum: 1500 bytes (MTU - Maximum Transmission Unit)
- Network Layer ржПрж░ packet ржПржЦрж╛ржирзЗ ржерж╛ржХрзЗ
```

**7. FCS (Frame Check Sequence) - 4 bytes:**
```
- CRC-32 algorithm ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ
- Error detection ржПрж░ ржЬржирзНржп
- ржкрзБрж░рзЛ frame ржПрж░ checksum

ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:
Sender:
1. Frame ржПрж░ рж╕ржм bit ржирж┐ржпрж╝рзЗ mathematical calculation ржХрж░рзЗ
2. ржПржХржЯрж┐ 32-bit value рждрзИрж░рж┐ ржХрж░рзЗ (FCS)
3. Frame ржПрж░ рж╢рзЗрж╖рзЗ ржпрзЛржЧ ржХрж░рзЗ

Receiver:
1. ржЖржмрж╛рж░ ржПржХржЗ calculation ржХрж░рзЗ
2. ржирж┐ржЬрзЗрж░ calculated value ржПрж░ рж╕рж╛ржерзЗ received FCS ржорж┐рж▓рж╛ржпрж╝
3. ржорж┐рж▓рж▓рзЗ тЬУ (рж╕ржарж┐ржХ), ржирж╛ ржорж┐рж▓рж▓рзЗ тЬЧ (ржнрзБрж▓, ржмрж╛рждрж┐рж▓)
```

---

## Switch ржПрж░ ржХрж╛ржЬ - ржЧржнрзАрж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг

### MAC Address Table (CAM Table):

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ MAC Address      тФВ Port тФВ VLAN     тФВ Age (sec)  тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ A1:B2:C3:D4:E5:F6тФВ  1   тФВ    10    тФВ    120     тФВ
тФВ 00:11:22:33:44:55тФВ  2   тФВ    10    тФВ     85     тФВ
тФВ FF:EE:DD:CC:BB:AAтФВ  3   тФВ    10    тФВ    200     тФВ
тФВ 12:34:56:78:9A:BCтФВ  4   тФВ    20    тФВ     45     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

Aging Time: рж╕рж╛ржзрж╛рж░ржгржд 300 seconds (5 minutes)
- ржПржЗ рж╕ржоржпрж╝рзЗ ржХрзЛржирзЛ traffic ржирж╛ ржерж╛ржХрж▓рзЗ entry ржорзБржЫрзЗ ржпрж╛ржпрж╝
```

### Switch Learning Process (рж╢рж┐ржЦржи ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛):

**Scenario 1: ржирждрзБржи ржбрж┐ржнрж╛ржЗрж╕ рж╕ржВржпрзБржХрзНржд рж╣рж▓рзЛ**

```
Step 1: PC-A (MAC: AA:AA:AA:AA:AA:AA) Port 1 ржП рж╕ржВржпрзБржХрзНржд
        Frame ржкрж╛ржарж╛рж▓рзЛ

Step 2: Switch frame receive ржХрж░рж▓рзЛ
        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
        тФВ ржПржЯрж╛ ржжрзЗржЦрж▓рзЛ:                      тФВ
        тФВ Source MAC: AA:AA:AA:AA:AA:AA   тФВ
        тФВ ржПрж╕рзЗржЫрзЗ: Port 1 ржерзЗржХрзЗ             тФВ
        тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

Step 3: MAC Table ржП entry ржпрзЛржЧ ржХрж░рж▓рзЛ
        тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФР
        тФВ AA:AA:AA:AA:AA:AAтФВ  1   тФВ
        тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФШ

Step 4: Destination MAC ржжрзЗржЦрж▓рзЛ
        ржпржжрж┐ Table ржП ржирж╛ ржерж╛ржХрзЗ тЖТ Flooding
        ржпржжрж┐ Table ржП ржерж╛ржХрзЗ тЖТ рж╕ржарж┐ржХ Port ржП ржкрж╛ржарж╛ржпрж╝
```

### Switch Forwarding Decision (ржлрж░ржУржпрж╝рж╛рж░рзНржбрж┐ржВ рж╕рж┐ржжрзНржзрж╛ржирзНржд):

**Case 1: Unicast - Known Destination**

```
Situation:
PC-A (Port 1, MAC: AA:AA) тЖТ PC-B (Port 3, MAC: BB:BB) ржП ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржпрж╝

Frame:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФР
тФВ Dest: BB:BBтФВSource: AA:AAтФВ Data тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФШ

Switch ржПрж░ ржХрж╛ржЬ:
1. Source MAC ржжрзЗржЦрзЗ тЖТ AA:AA, Port 1 тЖТ Table update
2. Dest MAC ржжрзЗржЦрзЗ тЖТ BB:BB
3. Table ржП ржЦрзБржБржЬрзЗ тЖТ BB:BB ржЖржЫрзЗ Port 3 ржП
4. рж╢рзБржзрзБ Port 3 ржП ржкрж╛ржарж╛ржпрж╝ тЬУ

Result: Efficient! ржЕржирзНржп port ржЧрзБрж▓рзЛрждрзЗ traffic ржпрж╛ржпрж╝ржирж┐
```

**Case 2: Unicast - Unknown Destination**

```
Situation:
PC-A (Port 1) тЖТ PC-X (MAC: XX:XX) ржП ржкрж╛ржарж╛рждрзЗ ржЪрж╛ржпрж╝
ржХрж┐ржирзНрждрзБ XX:XX, MAC Table ржП ржирзЗржЗ!

Switch ржПрж░ ржХрж╛ржЬ:
1. Source MAC ржжрзЗржЦрзЗ тЖТ Table update
2. Dest MAC (XX:XX) ржжрзЗржЦрзЗ тЖТ Table ржП ржирзЗржЗ!
3. Flooding ржХрж░рзЗ:
   - Source port (Port 1) ржЫрж╛ржбрж╝рж╛ рж╕ржм port ржП ржкрж╛ржарж╛ржпрж╝
   тФМтФАтФАтФАтФАтФАтФР
   тФВPort2тФВ тЖР Frame
   тФВPort3тФВ тЖР Frame
   тФВPort4тФВ тЖР Frame
   тФФтФАтФАтФАтФАтФАтФШ

4. PC-X ржпржЦржи reply ржХрж░ржмрзЗ:
   - Switch рждржЦржи XX:XX ржПрж░ MAC рж╢рж┐ржЦржмрзЗ
   - ржкрж░ржмрж░рзНрждрзАрждрзЗ direct ржкрж╛ржарж╛ржмрзЗ
```

**Case 3: Broadcast**

```
Situation:
PC-A ржерзЗржХрзЗ Broadcast (Dest: FF:FF:FF:FF:FF:FF)

Switch ржПрж░ ржХрж╛ржЬ:
1. Dest MAC ржжрзЗржЦрзЗ тЖТ FF:FF:FF:FF:FF:FF (Broadcast)
2. ржирж┐ржпрж╝ржо: Broadcast рж╕ржмрж╕ржоржпрж╝ рж╕ржм port ржП ржпрж╛ржпрж╝
3. Source port ржЫрж╛ржбрж╝рж╛ рж╕ржм port ржП ржкрж╛ржарж╛ржпрж╝

ржмрзНржпржмрж╣рж╛рж░:
- ARP Request (IP ржерзЗржХрзЗ MAC ржЦрзБржБржЬрждрзЗ)
- DHCP Discover
- Network discovery
```

**Case 4: Multicast**

```
Situation:
Streaming server multicast ржХрж░ржЫрзЗ (Dest: 01:00:5E:xx:xx:xx)

Switch ржПрж░ ржХрж╛ржЬ:
1. Multicast MAC ржЪрж┐ржирзЗ (ржкрзНрж░ржержо byte = 01)
2. IGMP snooping ржХрж░рзЗ ржмрзБржЭрзЗ ржХрзЛржи port ржП listener ржЖржЫрзЗ
3. рж╢рзБржзрзБ interested port ржЧрзБрж▓рзЛрждрзЗ ржкрж╛ржарж╛ржпрж╝

Example:
Ports ржпрзЗржЦрж╛ржирзЗ multicast group member ржЖржЫрзЗ:
- Port 2 тЬУ
- Port 5 тЬУ
- Port 7 тЬУ
рж╢рзБржзрзБ ржПржЗ рждрж┐ржи port ржП ржкрж╛ржарж╛ржмрзЗ
```

---

## Real-World Example - рж╕ржорзНржкрзВрж░рзНржг Flow

### Scenario: PC-1 ржерзЗржХрзЗ PC-2 рждрзЗ File ржкрж╛ржарж╛ржирзЛ

**Network Setup:**
```
        Switch
     тФМтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФР
     тФВ  1  2  3тФВ
     тФВ  тФВ  тФВ  тФВ
    PC-1 PC-2 Router
```

**Device Information:**
```
PC-1:
- MAC: AA:BB:CC:DD:EE:11
- IP: 192.168.1.10
- Port: 1

PC-2:
- MAC: AA:BB:CC:DD:EE:22
- IP: 192.168.1.20
- Port: 2

Router:
- MAC: AA:BB:CC:DD:EE:99
- IP: 192.168.1.1
- Port: 3
```

### ржкржжржХрзНрж╖рзЗржк рзз: ARP Process

```
PC-1 ржЬрж╛ржирзЗ PC-2 ржПрж░ IP (192.168.1.20)
ржХрж┐ржирзНрждрзБ ржЬрж╛ржирзЗ ржирж╛ MAC address!

ARP Request (Broadcast):
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВDest: FF:FF...тФВSource: AA:..11тФВWho has     тФВ
тФВ(Broadcast)   тФВ(PC-1)        тФВ192.168.1.20?тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

Switch ржПрж░ ржХрж╛ржЬ:
1. Source MAC рж╢рж┐ржЦрж▓рзЛ: AA:..11 тЖТ Port 1
2. Broadcast ржжрзЗржЦрж▓рзЛ тЖТ рж╕ржм port ржП ржкрж╛ржарж╛рж▓рзЛ
   - Port 2 тЖТ PC-2 ржкрзЗрж▓рзЛ тЬУ
   - Port 3 тЖТ Router ржкрзЗрж▓рзЛ (ignore ржХрж░рж▓рзЛ)

PC-2 ржПрж░ Response (Unicast):
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВDest: AA:..11 тФВSource: AA:..22тФВ192.168.1.20тФВ
тФВ(PC-1)        тФВ(PC-2)        тФВis at AA:..22тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

Switch ржПрж░ ржХрж╛ржЬ:
1. Source MAC рж╢рж┐ржЦрж▓рзЛ: AA:..22 тЖТ Port 2
2. Dest MAC ржжрзЗржЦрж▓рзЛ: AA:..11 тЖТ Table ржП Port 1
3. рж╢рзБржзрзБ Port 1 ржП ржкрж╛ржарж╛рж▓рзЛ тЬУ

ржПржЦржи PC-1 ржЬрж╛ржирзЗ PC-2 ржПрж░ MAC!
```

### ржкржжржХрзНрж╖рзЗржк рзи: File Transfer

```
Data Frame 1:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВDest: AA:..22 тФВSource: AA:..11тФВFile data   тФВ
тФВ(PC-2)        тФВ(PC-1)        тФВchunk 1     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
   6 bytes        6 bytes      46-1500 bytes

Switch Processing:
1. Frame ржЖрж╕рж▓рзЛ Port 1 ржерзЗржХрзЗ
2. Source MAC: AA:..11 тЖТ ржЗрждрж┐ржоржзрзНржпрзЗ ржЬрж╛ржирзЗ (refresh aging timer)
3. Dest MAC: AA:..22 тЖТ Table ржЪрзЗржХ ржХрж░рж▓рзЛ
   тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФР
   тФВ AA:..22  тФВ  2   тФВ тЖР ржкрзЗржпрж╝рзЗ ржЧрзЗрж▓рзЛ!
   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФШ
4. Frame рж╕рж░рж╛рж╕рж░рж┐ Port 2 ржП ржкрж╛ржарж╛рж▓рзЛ
5. Port 3 рждрзЗ ржХрж┐ржЫрзБ ржкрж╛ржарж╛рж▓рзЛ ржирж╛ (efficient!)

Data Frame 2, 3, 4... same process
```

### ржкржжржХрзНрж╖рзЗржк рзй: Acknowledgment

```
PC-2 ржерзЗржХрзЗ ACK:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВDest: AA:..11 тФВSource: AA:..22тФВACK receivedтФВ
тФВ(PC-1)        тФВ(PC-2)        тФВ            тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

Switch:
1. AA:..22, Port 2 тЖТ Table refresh
2. AA:..11 ржЦрзБржБржЬрж▓рзЛ тЖТ Port 1 ржкрзЗрж▓рзЛ
3. Port 1 ржП ржкрж╛ржарж╛рж▓рзЛ
```

### Switch MAC Table Final State:

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ MAC Address      тФВ Port тФВ Age      тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФ╝тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ AA:BB:CC:DD:EE:11тФВ  1   тФВ   5 sec  тФВ тЖР PC-1
тФВ AA:BB:CC:DD:EE:22тФВ  2   тФВ   3 sec  тФВ тЖР PC-2
тФВ AA:BB:CC:DD:EE:99тФВ  3   тФВ  280 sec тФВ тЖР Router
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```

---

## Error Detection - FCS ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд

### CRC-32 Calculation:

```
Example Frame (simplified):
Data: 11010011101100

Step 1: Generator Polynomial (CRC-32)
G(x) = 33 bits (fixed polynomial)

Step 2: Sender
1. Data ржПрж░ рж╢рзЗрж╖рзЗ 32 bits zero ржпрзЛржЧ ржХрж░рзЗ
   11010011101100 + 00000000000000000000000000000000
2. ржПржЯрж┐ржХрзЗ Generator ржжрж┐ржпрж╝рзЗ ржнрж╛ржЧ ржХрж░рзЗ
3. Remainder = FCS (32 bits)
4. Original data + FCS ржкрж╛ржарж╛ржпрж╝

Step 3: Receiver
1. ржкрзБрж░рзЛ frame ржирж┐ржпрж╝рзЗ ржПржХржЗ ржнрж╛ржЧ ржХрж░рзЗ
2. Remainder = 0 рж╣рж▓рзЗ тЬУ рж╕ржарж┐ржХ
3. Remainder тЙа 0 рж╣рж▓рзЗ тЬЧ error ржЖржЫрзЗ, frame ржмрж╛рждрж┐рж▓

Error Detection Capability:
- Single bit errors: 100%
- Double bit errors: 100%
- Burst errors (up to 32 bits): 100%
- Longer burst errors: 99.9999%
```

---

## ржмрж┐рж╢рзЗрж╖ ржкрж░рж┐рж╕рзНржерж┐рждрж┐

### Collision Domain (Hub ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ):

```
Hub (Old technology):
    тФМтФАтФАтФАтФ┤тФАтФАтФАтФР
    1   2   3
    тФВ   тФВ   тФВ
   PC-A PC-B PC-C

рж╕ржорж╕рзНржпрж╛:
- ржпржжрж┐ PC-A ржПржмржВ PC-B ржПржХрж╕рж╛ржерзЗ ржкрж╛ржарж╛ржпрж╝
- Collision рж╣ржпрж╝ (data ржирж╖рзНржЯ рж╣ржпрж╝)
- CSMA/CD ржкрзНрж░ржпрзБржХрзНрждрж┐ рж▓рж╛ржЧрзЗ

Solution: Switch ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛
- ржкрзНрж░рждрж┐ржЯрж┐ port ржЖрж▓рж╛ржжрж╛ collision domain
- Collision рж╣ржпрж╝ ржирж╛!
```

### VLAN (Virtual LAN):

```
Switch with VLAN:
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ         Switch                   тФВ
тФВ Port 1-4: VLAN 10 (Sales)       тФВ
тФВ Port 5-8: VLAN 20 (Engineering) тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

VLAN 10 ржПрж░ PC рж╢рзБржзрзБ VLAN 10 ржП communicate ржХрж░рждрзЗ ржкрж╛рж░рзЗ
VLAN 20 ржПрж░ PC рж╢рзБржзрзБ VLAN 20 ржП communicate ржХрж░рждрзЗ ржкрж╛рж░рзЗ

Benefit:
- Security тЖС
- Broadcast domain ржЫрзЛржЯ
- Better organization
```

ржПржнрж╛ржмрзЗ Data Link Layer рж╕ржорзНржкрзВрж░рзНржг local network ржПрж░ communication ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рзЗ! ЁЯМР
